name: "示例流程"
description: "这是一个示例RPA流程"
version: "1.0"

# 添加前置条件配置
prerequisites:
  app:
    package: "com.example.app"
    version: "1.0.0"
    apk_path: "./apps/example_app.apk"
  device:
    min_android: "7.0"
    required_permissions: ["CAMERA", "STORAGE"]

steps:
  - name: "检查应用安装"
    action: "check_app"
    params:
      package: "${prerequisites.app.package}"
      min_version: "${prerequisites.app.version}"
      install_if_missing: true
      apk_path: "${prerequisites.app.apk_path}"

  - name: "检查权限"
    action: "check_permissions"
    params:
      permissions: "${prerequisites.device.required_permissions}"
      grant_if_missing: true

  - name: "启动应用"
    action: "launch_app"
    params:
      package: "${prerequisites.app.package}"

  - name: "等待元素出现"
    action: "wait_element"
    params:
      type: "text"
      value: "登录"
      timeout: 10

  - name: "截取登录区域"
    action: "screenshot"
    params:
      region: [100, 200, 500, 800]
      filename_prefix: "login_area"
    save_result_as: "login_screenshot"

  - name: "识别登录区域文字"
    action: "ocr_extract"
    params:
      image_path: "${login_screenshot}"
      keywords: ["用户名", "密码"]

  - name: "点击登录按钮"
    action: "click_by_ocr"
    params:
      image_path: "${login_screenshot}"
      text: "登录"
      confidence: 0.9