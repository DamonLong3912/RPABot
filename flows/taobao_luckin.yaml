name: "淘宝购物测试"
app_name: "淘宝"
version: "1.0"
description: "打开手机淘宝并搜索进入指定商品页进行下单和打开支付宝付款"

# 添加设备配置
device:
  # ip: "10.166.135.205:5678"
  # ip: adb-2b09dc5a-RCIgsw._adb-tls-connect._tcp
  # ip: adb-e5eb6a80-zdp4sK._adb-tls-connect._tcp
  # ip: e5eb6a80
  ip: 2b09dc5a
  settings:
    wait_timeout: 10
    click_post_delay: 0.3

# 默认变量，可被API传入的变量覆盖
variables:
  var1: "【淘宝】52%买家复购 https://e.tb.cn/h.TEhTXl1blQS23xG?tk=LtkhelKTtOn CZ001 「星巴克电子券咖快啡快代下单咖啡兑换劵优惠卷中大杯自助门店自取」"
  intent_url: "taobao://item.taobao.com/item.htm?id=600254519991"
  var2: "瑞幸"
  # var3: "店铺福利⭐原价32面值饮品/不支持小黑杯/不支持超大杯❤️代下单自提"
  var3: "^.+原价32面值饮品\/不支持小黑.+"
  phone: "18606228848"
  name: '朱先生'
  address: '江苏省苏州市吴江区横扇街道姚家港村9组41号'
  position: [120.6398, 31.0586]
  goods_name: "小黄油美式"
  goods_name_regex: "^.+小黄油美式.+"
  type: "luckin"


steps:
  # - name: "打开淘宝"
  #  action: "start_app"
  #  params:
  #    package: "com.taobao.taobao"

  # - action: TaobaoSearchAction
  #  name: "点击搜索栏并搜索进入指定商品页"
  #  params:
  #    search_text: "${variables.var1}"  # 使用变量

  - action: "taobao_intent"
    name: "打开淘宝并进入指定商品"
    params:
      intent_url: "${variables.intent_url}"

  - action: TaobaoPayListAction
    name: "点击立即购买选择商品并下单"
    params:
      pay_status: "${variables.var2}"
      pay_list: "${variables.var3}"  # 使用变量
      phone: "${variables.phone}"
      name: "${variables.name}"
      address: "${variables.address}"
      position: "${variables.position}"



